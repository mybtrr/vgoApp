package com.gdswww.library.fragment;import java.lang.ref.WeakReference;import com.androidquery.AQuery;import android.app.Activity;import android.app.ProgressDialog;import android.content.Context;import android.content.Intent;import android.content.res.Resources;import android.content.res.Resources.NotFoundException;import android.os.Bundle;import android.os.Handler;import android.os.Message;import android.support.v4.app.FragmentActivity;import android.support.v4.view.ViewPager;import android.util.Log;import android.view.Gravity;import android.view.View;import android.webkit.WebView;import android.widget.Button;import android.widget.EditText;import android.widget.ExpandableListView;import android.widget.ImageButton;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.ListView;import android.widget.RadioButton;import android.widget.RadioGroup;import android.widget.RelativeLayout;import android.widget.TextView;import android.widget.Toast;/** * FragmentActivity基类 * @author shi */public abstract class BaseFragmentActivity extends FragmentActivity{	public MyHandler handler;	private String TAG;	public AQuery aq;	public ProgressDialog pd;	public Message msg;	public Resources res;	public Context context;	public Activity activity;	private void createProgressDialog(){		if (pd == null) {			pd = new ProgressDialog(activity);			pd.setCanceledOnTouchOutside(false);			pd.getWindow().setGravity(Gravity.CENTER);		}	}	public void showProgressDialog(String message, boolean isCancelable) {		createProgressDialog();		pd.setCancelable(isCancelable);		pd.setMessage(message);		pd.show();	}	public void dimissProgressDialog() {		if (pd != null && pd.isShowing()) {			pd.dismiss();		}	}	public void cancelProgressDialog() {		if (pd != null && pd.isShowing()) {			pd.cancel();		}	}	static class MyHandler extends Handler {		WeakReference<BaseFragmentActivity> mActivity;		MyHandler(BaseFragmentActivity activity) {			mActivity = new WeakReference<BaseFragmentActivity>(activity);		}		@Override		public void handleMessage(Message msg) {			mActivity.get().undateUI(msg);		}	}	/**	 * 子Activity 实现该方法 处理主线程UI	 * 	 * @param msg	 */	public abstract void undateUI(Message msg);	public abstract void initUI();	public abstract void regUIEvent();		@Override	protected void onCreate(Bundle arg0) {		// TODO Auto-generated method stub		super.onCreate(arg0);		context = getApplicationContext();		activity = this;		TAG = getClass().getSimpleName();		handler = new MyHandler(this);		msg = handler.obtainMessage();		aq = new AQuery(activity);		res = getResources();		initUI();		regUIEvent();			}						public void printError(String Message) {		if (Message != null) {			Log.e(TAG, Message);		}	}	public String getResStr(int id) {		String str = "";		try {			str = getResources().getString(id);		} catch (NotFoundException e) {			// TODO Auto-generated catch block			e.printStackTrace();			str = "";		}		return str;	}	private Toast toast;	public ExpandableListView getExpandableListView(int id) {		return (ExpandableListView) findViewById(id);	}	public TextView getTextView(int id) {		return (TextView) findViewById(id);	}	public RadioButton getRadioButton(int id) {		return (RadioButton) findViewById(id);	}	public RadioGroup getRadioGroup(int id) {		return (RadioGroup) findViewById(id);	}	public EditText getEditText(int id) {		return (EditText) findViewById(id);	}	public Button getButton(int id) {		return (Button) findViewById(id);	}	public WebView getWebView(int id) {		return (WebView) findViewById(id);	}	public void startActivity(Class<?> cls) {		startActivity(new Intent(context, cls));	}	public ImageButton getImageButton(int id) {		return (ImageButton) findViewById(id);	}	public ImageView getImageView(int id) {		return (ImageView) findViewById(id);	}	public ListView getListView(int id) {		return (ListView) findViewById(id);	}	public ViewPager getViewPager(int id) {		return (ViewPager) findViewById(id);	}	public LinearLayout getLinearLayout(int id) {		return (LinearLayout) findViewById(id);	}	public RelativeLayout getRelativeLayout(int id) {		return (RelativeLayout) findViewById(id);	}	/**	 * 获取文本框的文本	 * 	 * @param e	 * @return	 */	public String getEditTextString(EditText e) {		String str = "";		str = (e == null ? "" : e.getText().toString().trim());		return str;	}	/**	 * 隐藏视图	 * 	 * @param v	 */	public void hideView(View v) {		if (v != null) {			v.setVisibility(View.GONE);		}	}	/**	 * 隐藏视图但它占据了空间	 * 	 * @param v	 */	public void hideViewHasSpace(View v) {		if (v != null) {			v.setVisibility(View.INVISIBLE);		}	}	/**	 * 显示视图	 * 	 * @param v	 */	public void showView(View v) {		if (v != null) {			v.setVisibility(View.VISIBLE);		}	}	/**	 * 激活视图	 * 	 * @param v	 */	public void enableView(View v) {		if (v != null) {			v.setEnabled(false);		}	}	/**	 * 禁用视图	 * 	 * @param v	 */	public void disableView(View v) {		if (v != null) {			v.setEnabled(true);		}	}	public void back(View v) {		finish();	}	/**	 * 显示Toast提示	 * 	 * @param s	 */	public void showToatWithShort(String s) {		if (toast == null) {			toast = Toast.makeText(context, "",					Toast.LENGTH_SHORT);		}		toast.setText(s);		toast.show();	}	/**	 * 显示Toast提示	 * 	 * @param s	 */	public void showToatWithLong(String s) {		if (toast == null) {			toast = Toast.makeText(context, "",					Toast.LENGTH_LONG);		}		toast.setText(s);		toast.show();	}}